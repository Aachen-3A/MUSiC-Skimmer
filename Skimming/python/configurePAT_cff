#in 33x, anti-kt jets are called ak*, however in the 31x they are called antikt*.
#the following function call will fix this
import PhysicsTools.PatAlgos.tools.cmsswVersionTools
PhysicsTools.PatAlgos.tools.cmsswVersionTools.run33xOn31xMC( process )


#use 7 TeV JEC
process.jetCorrFactors.corrSample = 'Summer09_7TeV'

#configure PAT matching
process.electronMatch.checkCharge = cms.bool(False)
process.electronMatch.resolveByMatchQuality = cms.bool(True)
process.electronMatch.maxDeltaR = cms.double(0.2)
process.electronMatch.maxDPtRel = cms.double(1000000.0)

process.muonMatch.checkCharge = cms.bool(False)
process.muonMatch.resolveByMatchQuality = cms.bool(True)
process.muonMatch.maxDeltaR = cms.double(0.2)
process.muonMatch.maxDPtRel = cms.double(1000000.0)

process.photonMatch.checkCharge = cms.bool(False)
process.photonMatch.resolveByMatchQuality = cms.bool(True)
process.photonMatch.maxDeltaR = cms.double(0.2)
process.photonMatch.maxDPtRel = cms.double(1000000.0)

process.jetPartonMatch.checkCharge = cms.bool(False)
process.jetPartonMatch.resolveByMatchQuality = cms.bool(True)
process.jetPartonMatch.maxDeltaR = cms.double(0.4)
process.jetPartonMatch.maxDPtRel = cms.double(1000000.0)

process.jetGenJetMatch.checkCharge = cms.bool(False)
process.jetGenJetMatch.resolveByMatchQuality = cms.bool(True)
process.jetGenJetMatch.maxDeltaR = cms.double(0.4)
process.jetGenJetMatch.maxDPtRel = cms.double(1000000.0)


# save a reference to the gen-object instead of a copy.
# this of course only works if the gen collection is still in the event
# if we run PAT ourself on GEN-SIM-RECO, it is, so everything is fine
process.allLayer1Electrons.embedGenMatch = False
process.allLayer1Muons.embedGenMatch = False
process.allLayer1Photons.embedGenMatch = False
process.allLayer1Jets.embedGenJetMatch = False
process.allLayer1Jets.embedGenPartonMatch = False